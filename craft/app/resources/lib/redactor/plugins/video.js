!function($){$.Redactor.prototype.video=function(){return{reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,langs:{en:{video:"Video","video-html-code":"Video Embed Code or Youtube/Vimeo Link"}},getTemplate:function(){return String()+'<div class="modal-section" id="redactor-modal-video-insert"><section><label>'+this.lang.get("video-html-code")+'</label><textarea id="redactor-insert-video-area" style="height: 160px;"></textarea></section><section><button id="redactor-modal-button-action">Insert</button><button id="redactor-modal-button-cancel">Cancel</button></section></div>'},init:function(){var e=this.button.addAfter("image","video",this.lang.get("video"));this.button.setIcon(e,'<i class="re-icon-video"></i>'),this.button.addCallback(e,this.video.show)},show:function(){this.modal.addTemplate("video",this.video.getTemplate()),this.modal.load("video",this.lang.get("video"),700),this.modal.getActionButton().text(this.lang.get("insert")).on("click",this.video.insert),this.modal.show(),this.detect.isDesktop()&&setTimeout(function(){$("#redactor-insert-video-area").focus()},1)},insert:function(){var e=$("#redactor-insert-video-area").val(),t=e.match(/<iframe|<video/gi);if(t&&0!==t.length){var i=["iframe","video"],o=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;e=e.replace(o,function(e,t){return-1===i.indexOf(t.toLowerCase())?"":e}),this.opts.videoContainerClass=void 0===this.opts.videoContainerClass?"video-container":this.opts.videoContainerClass;var a='<div class="'+this.opts.videoContainerClass+'"><iframe style="width: 500px; height: 281px;" src="',s='" frameborder="0" allowfullscreen></iframe></div>';e=e.match(this.video.reUrlYoutube)?e.replace(this.video.reUrlYoutube,a+"//www.youtube.com/embed/$1"+s):e.match(this.video.reUrlVimeo)?e.replace(this.video.reUrlVimeo,a+"//player.vimeo.com/video/$2"+s):'<div class="'+this.opts.videoContainerClass+'">'+e+"</div>"}this.modal.close(),this.placeholder.hide(),this.buffer.set(),this.air.collapsed(),this.insert.html(e)}}}}(jQuery);